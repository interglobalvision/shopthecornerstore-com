Site={mobilethreshold:601,init:function(){var e=this;$(window).resize(function(){e.onResize()}),$(document).ready(function(){$("#splash-video").length?$("#splash-video").coverVid(1920,1080).addClass("show"):$(".splash-swiper").length&&e.Splash.init(),$("body").hasClass("blog")&&(e.Journal.init(),$(window).bind("resizeEnd",function(){e.Journal.masonryLayout()})),$("body").hasClass("single-editorial")&&e.Editorial.Single.init(),$("body").hasClass("post-type-archive-editorial")&&e.Editorial.Archive.init(),$("#products-stacey-nishimoto").length&&(e.StaceyNishimotoCatalog.init(),$(window).bind("resizeEnd",function(){e.StaceyNishimotoCatalog.init()})),e.Shop.init(),e.bindMenuToggle(),$(".newsletter-form").length&&null!==WP.mailchimp&&e.Mailchimp.init(),$("#newsletter-popup").length&&!$("body").hasClass("home")&&e.Popup.init(),e.fixWidows()})},onResize:function(){var e=this;e.resizeDelay()},resizeDelay:function(){var e;clearTimeout(e),e=setTimeout(function(){$(window).trigger("resizeEnd")},500)},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})},bindMenuToggle:function(){$("#toggle-menu").on("click",function(){$("body").toggleClass("mobile-menu-active")})}},Site.Popup={init:function(){var e=this,i=Cookies.get("show-popup");i="undefined"==typeof i||parseInt(i),i?(e.bindCloseButton(),e.showPopup()):$(".newsleter-popup").remove()},bindCloseButton:function(){var e=this;$("#close-popup").on("click",e.closePopup)},showPopup:function(){setTimeout(function(){$("body").addClass("show-popup")},4e3);var e=Cookies.get("popup-count")||0;e=parseInt(e)+1,e>2&&Cookies.set("show-popup",0,{expires:90}),Cookies.set("popup-count",e,{expires:30})},closePopup:function(e){$("body").removeClass("show-popup"),e&&Cookies.set("show-popup",0,{expires:90})}},Site.Shop={init:function(){$("body").hasClass("single-product")&&this.Product.init(),$("#products")&&this.ToggleProducts.init(),this.Cart.init()},Cart:{init:function(){this.$updateNotice=$("#cart-update-notice"),this.handleCartUpdate=this.handleCartUpdate.bind(this),this.bindCartUpdate()},bindCartUpdate:function(){window.addEventListener("gwsCartUpdate",this.handleCartUpdate)},handleCartUpdate:function(e){const i=e.detail.context,t=e.detail.variant;switch(i){case"added":this.handleItemAdded(t);break;case"removed":this.handleItemRemoved();break;case"incart":this.handleItemAdded();break;default:console.log("context undefined")}},handleItemAdded:function(e){this.displayCartNotice("Item added")},handleItemRemoved:function(){console.log("removed")},displayCartNotice:function(e){this.$updateNotice.text(e).fadeIn(300).delay(1e3).fadeOut(500).text()}},ToggleProducts:{init:function(){$(".toggle-sold").length&&$(".toggle-sold").on("click",function(e){e.preventDefault(),$("body").hasClass("hidden-products")?($("body").removeClass("hidden-products"),$('.shop-product[data-gws-available="false"]').fadeIn(300)):$('.shop-product[data-gws-available="false"]').fadeOut(300,function(){$("body").addClass("hidden-products")})})}},Product:{init:function(){var e=this;$(".swiper-container").length&&e.initSwiper()},initSwiper:function(){var e=this;e.$sliderPrev=$(".slider-prev"),e.$sliderNext=$(".slider-next"),e.swiper=new Swiper(".swiper-container",{speed:800,spaceBetween:0,setWrapperSize:!0,slidesPerView:2,slidesPerGroup:2,breakpoints:{600:{slidesPerView:1,slidesPerGroup:1}},onInit:function(e){$(".swiper-container").css("visibility","visible"),e.isBeginning&&!$(".slider-prev").is("[href]")&&$(".slider-prev").hide(),e.isEnd&&!$(".slider-next").is("[href]")&&$(".slider-next").hide()}}),e.bindPagination()},bindPagination:function(){var e=this;e.$sliderPrev.on("click",function(i){var t=$(this).attr("href");e.swiper.isBeginning&&"undefined"!=typeof t&&0!=t||(i.preventDefault(),e.swiper.slidePrev())}),e.$sliderNext.on("click",function(i){var t=$(this).attr("href");e.swiper.isEnd&&"undefined"!=typeof t&&0!=t||(i.preventDefault(),e.swiper.slideNext())})}}},Site.StaceyNishimotoCatalog={init:function(){var e=this;$(".swiper-slide").length>1&&$(window).width()>=786?($(".slider-button").removeClass("u-visuallyhidden"),e.initSwiper()):($(".swiper-container").css("visibility","visible"),$(".slider-button").addClass("u-visuallyhidden"),void 0!==e.swiper&&e.swiper.destroy(!0,!0))},initSwiper:function(){var e=this;e.swiper=new Swiper(".swiper-container",{speed:800,spaceBetween:0,setWrapperSize:!0,slidesPerView:1,nextButton:".swiper-next",prevButton:".swiper-prev",loop:!0,onInit:function(e){$(".swiper-container").css("visibility","visible")}})}},Site.Journal={init:function(){$("#journal-container").length&&($("#journal-container").masonry({itemSelector:".journal-post",transitionDuration:0}),$("#journal-container").imagesLoaded().progress(function(){$("#journal-container").masonry("layout")}))},masonryLayout:function(){$("#journal-container").length&&$("#journal-container").masonry("layout")}},Site.Splash={init:function(){var e=this;e.swiper=new Swiper(".swiper-container",{autoplay:3e3,loop:!0,speed:1500,effect:"fade",fade:{crossFade:!1}})}},Site.Editorial={Single:{init:function(){var e=this;new Swiper(".swiper-container",{loop:!1,speed:800,spaceBetween:36,nextButton:".slider-next",prevButton:".slider-prev",setWrapperSize:!0,onInit:function(i){$(".swiper-container").css("visibility","visible"),e.updateProductDetails(i)},onSlideChangeStart:function(i){e.updateProductDetails(i),i.isBeginning?($(".slider-prev").hide(),$(".slider-next").show()):i.isEnd?($(".slider-prev").show(),$(".slider-next").hide()):($(".slider-prev").show(),$(".slider-next").show())}})},updateProductDetails:function(e){if($(".swiper-slide-active").attr("data-product-1")||$(".swiper-slide-active").attr("data-product-2"))for(var i=1;i<3;i++)if($(".swiper-slide-active").attr("data-product-"+i)){var t=JSON.parse($(".swiper-slide-active").attr("data-product-"+i));$(".slider-product-"+i+"-details .js-product-title").html(t.title).attr("href",t.url),$(".slider-product-"+i+"-details .js-product-content").html(t.content),$(".slider-product-"+i+"-details .js-product-price").removeClass("u-hidden").html(t.price),$(".slider-product-"+i+"-details .js-product-attributes").html(t.attributes),t.stock?($(".slider-product-"+i+"-details .js-product-button").html(t.button_text).removeClass("u-hidden"),$(".slider-product-"+i+"-details .js-product-id").attr("value",t.id),$(".slider-product-"+i+"-details .js-product-sold").addClass("u-hidden")):($(".slider-product-"+i+"-details .js-product-price").addClass("u-hidden"),$(".slider-product-"+i+"-details .js-product-sold").removeClass("u-hidden").html(t.availability.availability),$(".slider-product-"+i+"-details .js-product-button").addClass("u-hidden")),$(".slider-product-"+i+"-details").show(),$(".slider-credits").hide()}else $(".slider-product-"+i+"-details, .slider-credits").hide();else e.isEnd?($(".slider-product-details").hide(),$(".slider-credits").show()):$(".slider-product-details").hide()}},Archive:{init:function(){var e=this;$(".archive-title").on("mouseover",function(){e.showImage($(this).attr("data-id"))})},showImage:function(e){$(".archive-editorial-image").hide(),$(".archive-editorial-image[data-id="+e+"]").show()}}},Site.Mailchimp={$form:$(".newsletter-form"),init:function(){var e=this;e.successCallback=e.successCallback.bind(e),e.$form.submit(function(i){i.preventDefault();var t=$(this).children(".newsletter-email").val();e.$reply=$(this).children(".newsletter-reply"),e.subscribe(t)})},subscribe:function(e){var i=this,t=WP.mailchimp.replace("/post?","/post-json?").concat("&c=?");$.ajax({url:t,data:{EMAIL:e},success:i.successCallback,dataType:"jsonp",error:function(e,i){console.log("mailchimp ajax submit error: "+i)}})},successCallback:function(e){var i=this,t="";if("success"===e.result)$(".newsletter-email").val(""),t="You've been successfully subscribed";else{var s=-1;try{var n=e.msg.split(" - ",2);if(void 0===n[1])t=e.msg;else{var o=parseInt(n[0],10);o.toString()===n[0]?(s=n[0],t=n[1]):(s=-1,t=e.msg)}}catch(r){s=-1,t=e.msg}}i.$reply.html(t),$("body").hasClass("show-popup")&&setTimeout(function(){Site.Popup.closePopup(!0)},3e3)}},Site.init();
//# sourceMappingURL=/main.min.js.map