{"version":3,"sources":["main.js"],"names":["Site","mobilethreshold","init","_this","this","$","window","resize","onResize","document","ready","length","coverVid","addClass","Splash","hasClass","Journal","bind","masonryLayout","Editorial","Single","Archive","StaceyNishimotoCatalog","Shop","bindMenuToggle","WP","mailchimp","Mailchimp","Popup","fixWidows","resizeDelay","resizeTimer","clearTimeout","setTimeout","trigger","each","string","html","replace","on","toggleClass","showPopup","Cookies","get","parseInt","bindCloseButton","remove","closePopup","cookieCount","set","expires","disable","removeClass","Product","ToggleProducts","Cart","$updateNotice","handleCartUpdate","bindCartUpdate","addEventListener","e","context","detail","variant","handleItemAdded","handleItemRemoved","console","log","displayCartNotice","notice","text","fadeIn","delay","fadeOut","event","preventDefault","initSwiper","$sliderPrev","$sliderNext","swiper","Swiper","speed","spaceBetween","setWrapperSize","slidesPerView","slidesPerGroup","breakpoints","600","onInit","css","isBeginning","is","hide","isEnd","bindPagination","href","attr","slidePrev","slideNext","width","undefined","destroy","nextButton","prevButton","loop","masonry","itemSelector","transitionDuration","imagesLoaded","progress","autoplay","effect","fade","crossFade","updateProductDetails","onSlideChangeStart","show","prod","productData","JSON","parse","showImage","id","$form","successCallback","submit","email","children","val","$reply","subscribe","url","concat","ajax","data","EMAIL","success","dataType","error","resp","response","msg","result","index","parts","split","i","toString"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site, Swiper */\n\nSite = {\n  mobilethreshold: 601,\n  init: function() {\n    var _this = this;\n\n//     Site.Layout.init();\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n\n//       Site.Layout.layout();\n\n      if ($('#splash-video').length) {\n        $('#splash-video').coverVid(1920, 1080).addClass('show');\n      } else if ($('.splash-swiper').length) {\n        _this.Splash.init();\n      }\n\n      if ($('body').hasClass('blog')) {\n        _this.Journal.init();\n\n        $(window).bind('resizeEnd', function() {\n          _this.Journal.masonryLayout();\n        });\n        // bind end of resize event triggered by resizeDelay()\n      }\n\n      if ($('body').hasClass('single-editorial')) {\n        _this.Editorial.Single.init();\n      }\n\n      if ($('body').hasClass('post-type-archive-editorial')) {\n        _this.Editorial.Archive.init();\n      }\n\n      if ($('#products-stacey-nishimoto').length) {\n        _this.StaceyNishimotoCatalog.init();\n\n        $(window).bind('resizeEnd', function() {\n          _this.StaceyNishimotoCatalog.init();\n        });\n      }\n\n      _this.Shop.init();\n\n      _this.bindMenuToggle();\n\n      if ($('.newsletter-form').length && WP.mailchimp !== null) {\n        _this.Mailchimp.init();\n      }\n\n      if ($('#newsletter-popup').length && !$('body').hasClass('home')) {\n        _this.Popup.init();\n      }\n\n      _this.fixWidows();\n\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    _this.resizeDelay();\n  },\n\n  resizeDelay: function() {\n    var resizeTimer;\n\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(function() {\n      $(window).trigger('resizeEnd');\n    }, 500);\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  bindMenuToggle: function() {\n    $('#toggle-menu').on('click', function() {\n      $('body').toggleClass('mobile-menu-active');\n    });\n  },\n};\n\nSite.Popup = {\n  init: function() {\n    var _this = this;\n\n    // Check popup cookie\n    var showPopup = Cookies.get('show-popup');\n\n    if(typeof showPopup === 'undefined') { // Cookie is not set\n      showPopup = true; // Default to true\n    } else { // Cookie is set\n      showPopup = parseInt(showPopup); // Parse the value of the cookie\n    }\n\n    if (showPopup) {\n      _this.bindCloseButton();\n      _this.showPopup();\n    } else {\n      $('.newsleter-popup').remove(); // Remove the popup element from the DOM\n    }\n  },\n\n  bindCloseButton: function() {\n    var _this = this;\n\n    $('#close-popup').on('click', _this.closePopup);\n  },\n\n  showPopup: function() {\n    setTimeout( function() {\n      $('body').addClass('show-popup');\n    }, 4000); // Delayfor 4 sec\n\n    // Get how many times the popup has been shown from cookies\n    var cookieCount = Cookies.get('popup-count') || 0; // Defaults to 0\n\n    cookieCount = parseInt(cookieCount) + 1; // Increase the count\n\n    if (cookieCount > 2) {\n      Cookies.set('show-popup', 0, { expires: 90 }); // Disable popup for 90 days\n    }\n\n    Cookies.set('popup-count', cookieCount, { expires: 30 }); // Save new count or 30 days\n  },\n\n  closePopup: function(disable) {\n    $('body').removeClass('show-popup');\n\n    if(disable) {\n      Cookies.set('show-popup', 0, { expires: 90 }); // Disable popup for 90 days\n    }\n  },\n};\n\nSite.Shop = {\n  init: function() {\n    if ($('body').hasClass('single-product')) {\n      this.Product.init();\n    }\n\n    if ($('#products')) {\n      this.ToggleProducts.init();\n    }\n\n    this.Cart.init();\n  },\n\n  Cart: {\n    init: function() {\n      this.$updateNotice = $('#cart-update-notice');\n\n      this.handleCartUpdate = this.handleCartUpdate.bind(this);\n\n      this.bindCartUpdate();\n    },\n\n    bindCartUpdate: function() {\n      window.addEventListener('gwsCartUpdate', this.handleCartUpdate);\n    },\n\n    handleCartUpdate: function(e) {\n      const context = e.detail.context;\n      const variant = e.detail.variant;\n\n      switch (context) {\n        case 'added':\n          this.handleItemAdded(variant);\n          break;\n        case 'removed':\n          this.handleItemRemoved();\n          break;\n        case 'incart':\n          this.handleItemAdded();\n          break;\n        default:\n          console.log('context undefined');\n      }\n    },\n\n    handleItemAdded: function(variant) {\n      this.displayCartNotice('Item added');\n    },\n\n    handleItemRemoved: function() {\n      console.log('removed');\n    },\n\n    displayCartNotice: function(notice) {\n      this.$updateNotice.text(notice).fadeIn(300).delay(1000).fadeOut(500).text();\n    }\n  },\n\n  ToggleProducts: {\n    init: function() {\n      var _this = this;\n\n      if($('.toggle-sold').length) {\n        // bind on click\n        $('.toggle-sold').on('click', function(event) {\n          event.preventDefault();\n\n          // Check if products are hidden\n          if($('body').hasClass('hidden-products')) {\n            // show sold out products\n            $('body').removeClass('hidden-products');\n            $('.shop-product[data-gws-available=\"false\"]').fadeIn(300);\n          } else {\n            // hide sold out products\n            $('.shop-product[data-gws-available=\"false\"]').fadeOut(300, function() {\n              $('body').addClass('hidden-products');\n            });\n          }\n        });\n\n      }\n    }\n  },\n\n  Product: {\n    init: function() {\n      var _this = this;\n\n      if ($('.swiper-container').length) {\n        _this.initSwiper();\n      }\n    },\n\n    initSwiper: function() {\n      var _this = this;\n\n      _this.$sliderPrev = $('.slider-prev');\n      _this.$sliderNext = $('.slider-next');\n\n      _this.swiper = new Swiper('.swiper-container', {\n        speed: 800,\n        spaceBetween: 0,\n        setWrapperSize: true,\n        slidesPerView: 2,\n        slidesPerGroup: 2,\n        breakpoints: {\n          // when window width is <= 600px\n          600: {\n            slidesPerView: 1,\n            slidesPerGroup: 1,\n          }\n        },\n        onInit: function(swiper) {\n          // show slider\n          $('.swiper-container').css('visibility','visible');\n\n          // conditionally hide slider/product pagination\n          if (swiper.isBeginning && !$('.slider-prev').is('[href]')) {\n            $('.slider-prev').hide();\n          }\n\n          if (swiper.isEnd && !$('.slider-next').is('[href]')) {\n            $('.slider-next').hide();\n          }\n        }\n      });\n\n      _this.bindPagination();\n    },\n\n    bindPagination: function() {\n      var _this = this;\n\n      // Prev moves gallery until first slide, then allows <a> link\n      _this.$sliderPrev.on('click', function(e) {\n        var href = $(this).attr('href');\n\n        if (!_this.swiper.isBeginning || typeof href == typeof undefined || href == false) {\n          e.preventDefault();\n          _this.swiper.slidePrev();\n        }\n      });\n\n      // Next moves gallery until last slide, then allows <a> link\n      _this.$sliderNext.on('click', function(e) {\n        var href = $(this).attr('href');\n\n        if (!_this.swiper.isEnd || typeof href == typeof undefined || href == false) {\n          e.preventDefault();\n          _this.swiper.slideNext();\n        }\n      });\n    }\n  },\n};\n\nSite.StaceyNishimotoCatalog = {\n  init: function() {\n    var _this = this;\n\n    if ($('.swiper-slide').length > 1 && $(window).width() >= 786) {\n      $('.slider-button').removeClass('u-visuallyhidden');\n      _this.initSwiper();\n    } else {\n      $('.swiper-container').css('visibility','visible');\n      $('.slider-button').addClass('u-visuallyhidden');\n      if (_this.swiper !== undefined) {\n        _this.swiper.destroy(true,true);\n      }\n    }\n  },\n\n  initSwiper: function() {\n    var _this = this;\n\n    _this.swiper = new Swiper('.swiper-container', {\n      speed: 800,\n      spaceBetween: 0,\n      setWrapperSize: true,\n      slidesPerView: 1,\n      nextButton: '.swiper-next',\n      prevButton: '.swiper-prev',\n      loop: true,\n      onInit: function(swiper) {\n        // show slider\n        $('.swiper-container').css('visibility','visible');\n      }\n    });\n  }\n}\n\nSite.Journal = {\n  init: function() {\n    if ($('#journal-container').length) {\n      $('#journal-container').masonry({\n        itemSelector: '.journal-post',\n        transitionDuration: 0,\n      });\n\n      $('#journal-container').imagesLoaded().progress( function() {\n        $('#journal-container').masonry('layout');\n      });\n    }\n  },\n\n  masonryLayout: function() {\n    if ($('#journal-container').length) {\n      $('#journal-container').masonry('layout');\n    }\n  },\n\n};\n\nSite.Splash = {\n  init: function() {\n    var _this = this;\n\n    _this.swiper = new Swiper('.swiper-container', {\n      autoplay: 3000,\n      loop: true,\n      speed: 1500,\n      effect: 'fade',\n      fade: {\n        crossFade: false\n      },\n    });\n  },\n\n};\n\nSite.Editorial = {\n\n  Single: {\n    init: function() {\n      var _this = this;\n\n      var swiper = new Swiper('.swiper-container', {\n        loop: false,\n        speed: 800,\n        spaceBetween: 36,\n        nextButton: '.slider-next',\n        prevButton: '.slider-prev',\n        setWrapperSize: true,\n        onInit: function(swiper) {\n          $('.swiper-container').css('visibility','visible');\n          _this.updateProductDetails(swiper);\n        },\n        onSlideChangeStart: function(swiper) {\n          _this.updateProductDetails(swiper);\n\n          if (swiper.isBeginning) {\n            $('.slider-prev').hide();\n            $('.slider-next').show();\n          } else if (swiper.isEnd) {\n            $('.slider-prev').show();\n            $('.slider-next').hide();\n          } else {\n            $('.slider-prev').show();\n            $('.slider-next').show();\n          }\n        }\n      });\n    },\n\n    updateProductDetails: function(swiper) {\n      var _this = this;\n\n      if ($('.swiper-slide-active').attr('data-product-1') || $('.swiper-slide-active').attr('data-product-2')) {\n        for(var prod = 1; prod < 3; prod++) {\n          if ($('.swiper-slide-active').attr('data-product-' + prod)) {\n            var productData = JSON.parse($('.swiper-slide-active').attr('data-product-' + prod));\n\n            $('.slider-product-' + prod +'-details .js-product-title').html(productData['title']).attr('href',productData['url']);\n            $('.slider-product-' + prod +'-details .js-product-content').html(productData['content']);\n            $('.slider-product-' + prod +'-details .js-product-price').removeClass('u-hidden').html(productData['price']);\n            $('.slider-product-' + prod +'-details .js-product-attributes').html(productData['attributes']);\n\n            if (productData['stock']) {\n              $('.slider-product-' + prod +'-details .js-product-button').html(productData['button_text']).removeClass('u-hidden');\n              $('.slider-product-' + prod +'-details .js-product-id').attr('value',productData['id']);\n              $('.slider-product-' + prod +'-details .js-product-sold').addClass('u-hidden');\n            } else {\n              $('.slider-product-' + prod +'-details .js-product-price').addClass('u-hidden');\n              $('.slider-product-' + prod +'-details .js-product-sold').removeClass('u-hidden').html(productData['availability']['availability']);\n              $('.slider-product-' + prod +'-details .js-product-button').addClass('u-hidden');\n            }\n\n            $('.slider-product-' + prod +'-details').show();\n            $('.slider-credits').hide();\n          } else {\n            $('.slider-product-' + prod +'-details, .slider-credits').hide();\n          }\n        }\n      } else if (swiper.isEnd) {\n        $('.slider-product-details').hide();\n        $('.slider-credits').show();\n      } else {\n        $('.slider-product-details').hide();\n      }\n    },\n  },\n\n  Archive: {\n\n    init: function() {\n      var _this = this;\n\n      $('.archive-title').on('mouseover',function() {\n        _this.showImage( $(this).attr('data-id') );\n      });\n    },\n\n    showImage: function(id) {\n      $('.archive-editorial-image').hide();\n      $('.archive-editorial-image[data-id=' + id + ']').show();\n    }\n  },\n};\n\nSite.Mailchimp = {\n  $form: $('.newsletter-form'),\n  init: function() {\n    var _this = this;\n\n    _this.successCallback = _this.successCallback.bind(_this);\n\n    _this.$form.submit(function(e) {\n      e.preventDefault();\n\n      var email = $(this).children('.newsletter-email').val();\n      _this.$reply = $(this).children('.newsletter-reply');\n\n      _this.subscribe(email);\n\n    });\n\n  },\n\n  subscribe: function(email) {\n    var _this = this;\n\n    // Rewrite action URL for JSONP\n    var url = WP.mailchimp.replace('/post?', '/post-json?').concat('&c=?');\n\n    // Ajax post to Mailchimp API\n    $.ajax({\n      url: url,\n      data: {\n        EMAIL: email,\n      },\n      success: _this.successCallback,\n      dataType: 'jsonp',\n      error: function (resp, text) {\n        console.log('mailchimp ajax submit error: ' + text);\n      }\n    });\n  },\n\n  successCallback: function(response) {\n    var _this = this;\n\n    var msg = '';\n\n    if (response.result === 'success') {\n      // Clean input\n      $('.newsletter-email').val('');\n\n      // Success message\n      msg = 'You\\'ve been successfully subscribed';\n    } else {\n      // Make error message from API response\n      var index = -1;\n\n      try {\n        var parts = response.msg.split(' - ', 2);\n\n        if (parts[1] === undefined) {\n          msg = response.msg;\n        } else {\n          var i = parseInt(parts[0], 10);\n\n          if (i.toString() === parts[0]) {\n            index = parts[0];\n            msg = parts[1];\n          } else {\n            index = -1;\n            msg = response.msg;\n          }\n        }\n      }\n      catch (e) {\n        index = -1;\n        msg = response.msg;\n      }\n    }\n\n    // Show message\n    _this.$reply.html(msg);\n\n    // If the popup is showing\n    if ($('body').hasClass('show-popup')) {\n      // close popup after 3 sec\n      setTimeout(function() {\n        Site.Popup.closePopup(true);\n      }, 3000);\n    }\n  },\n};\n\nSite.init();\n"],"sourceRoot":"/source/"}