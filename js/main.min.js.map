{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","document","ready","length","Splash","hasClass","Journal","bind","masonryLayout","Editorial","Single","Archive","Shop","resizeDelay","resizeTimer","clearTimeout","setTimeout","trigger","fixWidows","each","string","html","replace","Search","Product","val","addClass","bindFocus","bindFocusOut","on","e","preventDefault","focus","removeClass","initSwiper","$sliderPrev","$sliderNext","swiper","Swiper","speed","spaceBetween","setWrapperSize","onInit","css","bindPagination","href","attr","isBeginning","slidePrev","isEnd","slideNext","masonry","itemSelector","transitionDuration","imagesLoaded","progress","autoplay","loop","effect","fade","crossFade","nextButton","prevButton","updateProductDetails","onSlideChangeStart","hide","show","prod","productData","JSON","parse","showImage","id"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site, Swiper */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n//     Site.Layout.init();\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n\n//       Site.Layout.layout();\n\n      if ($('.splash-swiper').length) {\n        _this.Splash.init();\n      }\n\n      if ($('body').hasClass('blog')) {\n        _this.Journal.init();\n\n        $(window).bind('resizeEnd', function() {\n          _this.Journal.masonryLayout();\n        });\n        // bind end of resize event triggered by resizeDelay()\n      }\n\n      if ($('body').hasClass('single-editorial')) {\n        _this.Editorial.Single.init();\n      }\n\n      if ($('body').hasClass('post-type-archive-editorial')) {\n        _this.Editorial.Archive.init();\n      }\n\n      if ($('body').hasClass('woocommerce')) {\n        _this.Shop.init();\n      }\n\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    _this.resizeDelay();\n  },\n\n  resizeDelay: function() {\n    var resizeTimer;\n\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(function() {\n      $(window).trigger('resizeEnd');\n    }, 500);\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n};\n\nSite.Shop = {\n  init: function() {\n    var _this = this;\n\n    this.Search.init();\n\n    if ($('body').hasClass('single-product')) {\n      _this.Product.init();\n    }\n  },\n\n  Search: {\n    init: function() {\n      var _this = this;\n\n      if ($('#searchform').length) {\n        if (!$('#s').val()) {\n          $('#searchform').addClass('active');\n        }\n        _this.bindFocus();\n        _this.bindFocusOut();\n      }\n    },\n\n    bindFocus: function() {\n      $('#searchform').on('click', function(e) {\n        if (!$(this).hasClass('active')) {\n          e.preventDefault();\n\n          $(this).addClass('active');\n          $('#s').focus();\n        }\n      });\n    },\n\n    bindFocusOut: function() {\n      $('#s').on('focusout', function() {\n        if(!$(this).val()) {\n          $('#searchform').removeClass('active');\n        }\n      });\n    },\n\n  },\n\n  Product: {\n    init: function() {\n      var _this = this;\n\n      if ($('.swiper-container').length) {\n        _this.initSwiper();\n      }\n    },\n\n    initSwiper: function() {\n      var _this = this;\n\n      _this.$sliderPrev = $('.slider-prev');\n      _this.$sliderNext = $('.slider-next');\n\n      _this.swiper = new Swiper('.swiper-container', {\n        speed: 800,\n        spaceBetween: 36,\n        setWrapperSize: true,\n        onInit: function() {\n          $('.swiper-container').css('visibility','visible');\n        },\n      });\n\n      _this.bindPagination();\n    },\n\n    bindPagination: function() {\n      var _this = this;\n\n      // Prev moves gallery until first slide, then allows <a> link\n      _this.$sliderPrev.on('click', function(e) {\n        var href = $(this).attr('href');\n\n        if (!_this.swiper.isBeginning || typeof href == typeof undefined || href == false) {\n          e.preventDefault();\n          _this.swiper.slidePrev();\n        }\n      });\n\n      // Next moves gallery until last slide, then allows <a> link\n      _this.$sliderNext.on('click', function(e) {\n        var href = $(this).attr('href');\n\n        if (!_this.swiper.isEnd || typeof href == typeof undefined || href == false) {\n          e.preventDefault();\n          _this.swiper.slideNext();\n        }\n      });\n    }\n  },\n};\n\nSite.Journal = {\n  init: function() {\n    if ($('#journal-container').length) {\n      $('#journal-container').masonry({\n        itemSelector: '.journal-post',\n        transitionDuration: 0,\n      });\n\n      $('#journal-container').imagesLoaded().progress( function() {\n        $('#journal-container').masonry('layout');\n      });\n    }\n  },\n\n  masonryLayout: function() {\n    if ($('#journal-container').length) {\n      $('#journal-container').masonry('layout');\n    }\n  },\n\n};\n\nSite.Splash = {\n  init: function() {\n    var _this = this;\n\n    _this.swiper = new Swiper('.swiper-container', {\n      autoplay: 3000,\n      loop: true,\n      speed: 1500,\n      effect: 'fade',\n      fade: {\n        crossFade: false\n      },\n    });\n  },\n\n};\n\nSite.Editorial = {\n\n  Single: {\n    init: function() {\n      var _this = this;\n\n      var swiper = new Swiper('.swiper-container', {\n        loop: false,\n        speed: 800,\n        spaceBetween: 36,\n        nextButton: '.slider-next',\n        prevButton: '.slider-prev',\n        setWrapperSize: true,\n        onInit: function(swiper) {\n          $('.swiper-container').css('visibility','visible');\n          _this.updateProductDetails(swiper);\n        },\n        onSlideChangeStart: function(swiper) {\n          _this.updateProductDetails(swiper);\n\n          if (swiper.isBeginning) {\n            $('.slider-prev').hide();\n            $('.slider-next').show();\n          } else if (swiper.isEnd) {\n            $('.slider-prev').show();\n            $('.slider-next').hide();\n          } else {\n            $('.slider-prev').show();\n            $('.slider-next').show();\n          }\n        }\n      });\n    },\n\n    updateProductDetails: function(swiper) {\n      var _this = this;\n\n      if ($('.swiper-slide-active').attr('data-product-1') || $('.swiper-slide-active').attr('data-product-2')) {\n        for(var prod = 1; prod < 3; prod++) {\n          if ($('.swiper-slide-active').attr('data-product-' + prod)) {\n            var productData = JSON.parse($('.swiper-slide-active').attr('data-product-' + prod));\n\n            $('.slider-product-' + prod +'-details .js-product-title').html(productData['title']).attr('href',productData['url']);\n            $('.slider-product-' + prod +'-details .js-product-content').html(productData['content']);\n            $('.slider-product-' + prod +'-details .js-product-price').html(productData['price']);\n            $('.slider-product-' + prod +'-details .js-product-attributes').html(productData['attributes']);\n\n            if (productData['stock']) {\n              $('.slider-product-' + prod +'-details .js-product-button').html(productData['button_text']).removeClass('u-hidden');\n              $('.slider-product-' + prod +'-details .js-product-id').attr('value',productData['id']);\n              $('.slider-product-' + prod +'-details .js-product-sold').addClass('u-hidden');\n            } else {\n              $('.slider-product-' + prod +'-details .js-product-sold').removeClass('u-hidden').html(productData['availability']['availability']);\n              $('.slider-product-' + prod +'-details .js-product-button').addClass('u-hidden');\n            }\n\n            $('.slider-product-' + prod +'-details').show();\n            $('.slider-credits').hide();\n          } else {\n            $('.slider-product-' + prod +'-details, .slider-credits').hide();\n          }\n        }\n      } else if (swiper.isEnd) {\n        $('.slider-product-details').hide();\n        $('.slider-credits').show();\n      } else {\n        $('.slider-product-details').hide();\n      }\n    },\n  },\n\n  Archive: {\n\n    init: function() {\n      var _this = this;\n\n      $('.archive-title').on('mouseover',function() {\n        _this.showImage( $(this).attr('data-id') );\n      });\n    },\n\n    showImage: function(id) {\n      $('.archive-editorial-image').hide();\n      $('.archive-editorial-image[data-id=' + id + ']').show();\n    }\n  },\n};\n\nSite.init();\n"],"sourceRoot":"/source/"}